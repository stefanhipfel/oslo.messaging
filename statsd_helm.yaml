mapping.yaml: |
  mappings:
  - match: "oslo.messaging.*.*"
    name: "oslo_messaging_events"
    labels:
      method: "$1"
      type: "$2"

containers:
- args:
  - --web.listen-address=:9102
  - --web.telemetry-path=/metrics
  - --statsd.listen-udp=:8125
  - --statsd.listen-tcp=
  - --statsd.cache-size=1000
  - --statsd.event-queue-size=10000
  - --statsd.event-flush-threshold=1000
  - --statsd.event-flush-interval=200ms
  - --statsd.mapping-config=/etc/mapping.yaml
  image: prom/statsd-exporter
  imagePullPolicy: Always
  name: statsd-exporter
  ports:
  - containerPort: 9102
    name: web
    protocol: TCP
  - containerPort: 8125
    name: statsd-udp
    protocol: UDP
  resources: {}
  terminationMessagePath: /dev/termination-log
  terminationMessagePolicy: File
  volumeMounts:
  - mountPath: /etc/mapping.yaml
    name: ironic-conductor-etc
    readOnly: true
    subPath: mapping.yaml